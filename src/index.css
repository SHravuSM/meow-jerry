@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
@import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;500;600&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Ubuntu+Mono:wght@400;700&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500;600&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Source+Code+Pro:wght@400;500;600&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  /* Light theme (default) */
  :root,
  .theme-light {
    --background: 210 40% 98%;
    --foreground: 215 25% 27%;

    --card: 0 0% 100%;
    --card-foreground: 215 25% 27%;

    --popover: 0 0% 100%;
    --popover-foreground: 215 25% 27%;

    --primary: 215 70% 55%;
    --primary-foreground: 210 40% 98%;

    --secondary: 215 10% 92%;
    --secondary-foreground: 215 25% 27%;

    --muted: 215 10% 92%;
    --muted-foreground: 215 25% 47%;

    --accent: 215 10% 92%;
    --accent-foreground: 215 25% 27%;

    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 210 40% 98%;

    --border: 214.3 31.8% 91.4%;
    --input: 214.3 31.8% 91.4%;
    --ring: 215 70% 55%;

    --radius: 0.5rem;

    --correct: 142 55% 45%;
    --error: 0 72% 51%;
  }

  /* Dark theme */
  .theme-dark {
    --background: 215 28% 12%;
    --foreground: 210 40% 98%;

    --card: 215 28% 17%;
    --card-foreground: 210 40% 98%;

    --popover: 215 28% 17%;
    --popover-foreground: 210 40% 98%;

    --primary: 215 70% 75%;
    --primary-foreground: 215 28% 12%;

    --secondary: 215 25% 25%;
    --secondary-foreground: 210 40% 98%;

    --muted: 215 25% 25%;
    --muted-foreground: 210 40% 80%;

    --accent: 215 25% 25%;
    --accent-foreground: 210 40% 98%;

    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 210 40% 98%;

    --border: 215 28% 25%;
    --input: 215 28% 25%;
    --ring: 215 70% 75%;

    --correct: 142 70% 49%;
    --error: 0 72% 51%;
  }

  /* Sepia theme */
  .theme-sepia {
    --background: 35 33% 90%;
    --foreground: 35 25% 20%;

    --card: 35 25% 95%;
    --card-foreground: 35 25% 20%;

    --popover: 35 25% 95%;
    --popover-foreground: 35 25% 20%;

    --primary: 35 90% 35%;
    --primary-foreground: 35 33% 90%;

    --secondary: 35 15% 85%;
    --secondary-foreground: 35 25% 20%;

    --muted: 35 15% 85%;
    --muted-foreground: 35 25% 40%;

    --accent: 35 15% 85%;
    --accent-foreground: 35 25% 20%;

    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 35 33% 90%;

    --border: 35 25% 85%;
    --input: 35 25% 85%;
    --ring: 35 90% 35%;

    --correct: 120 50% 40%;
    --error: 0 72% 51%;
  }

  /* Nord theme */
  .theme-nord {
    --background: 220 16% 22%;
    --foreground: 218 27% 92%;

    --card: 220 16% 28%;
    --card-foreground: 218 27% 92%;

    --popover: 220 16% 28%;
    --popover-foreground: 218 27% 92%;

    --primary: 210 34% 63%;
    --primary-foreground: 220 16% 22%;

    --secondary: 220 16% 36%;
    --secondary-foreground: 218 27% 92%;

    --muted: 220 16% 36%;
    --muted-foreground: 218 27% 80%;

    --accent: 220 16% 36%;
    --accent-foreground: 218 27% 92%;

    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 218 27% 92%;

    --border: 220 16% 36%;
    --input: 220 16% 36%;
    --ring: 210 34% 63%;

    --correct: 144 42% 56%;
    --error: 354 42% 56%;
  }

  /* Dracula theme */
  .theme-dracula {
    --background: 231 15% 18%;
    --foreground: 60 30% 96%;

    --card: 231 15% 24%;
    --card-foreground: 60 30% 96%;

    --popover: 231 15% 24%;
    --popover-foreground: 60 30% 96%;

    --primary: 326 100% 74%;
    --primary-foreground: 231 15% 18%;

    --secondary: 231 15% 28%;
    --secondary-foreground: 60 30% 96%;

    --muted: 231 15% 28%;
    --muted-foreground: 60 30% 85%;

    --accent: 231 15% 28%;
    --accent-foreground: 60 30% 96%;

    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 60 30% 96%;

    --border: 231 15% 28%;
    --input: 231 15% 28%;
    --ring: 326 100% 74%;

    --correct: 135 94% 65%;
    --error: 0 100% 67%;
  }

  /* Solarized theme */
  .theme-solarized {
    --background: 44 87% 94%;
    --foreground: 196 15% 30%;

    --card: 44 87% 99%;
    --card-foreground: 196 15% 30%;

    --popover: 44 87% 99%;
    --popover-foreground: 196 15% 30%;

    --primary: 175 74% 37%;
    --primary-foreground: 44 87% 94%;

    --secondary: 44 50% 88%;
    --secondary-foreground: 196 15% 30%;

    --muted: 44 50% 88%;
    --muted-foreground: 196 15% 50%;

    --accent: 44 50% 88%;
    --accent-foreground: 196 15% 30%;

    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 44 87% 94%;

    --border: 44 50% 88%;
    --input: 44 50% 88%;
    --ring: 175 74% 37%;

    --correct: 145 63% 42%;
    --error: 1 71% 52%;
  }

  /* Monokai theme */
  .theme-monokai {
    --background: 60 6% 14%;
    --foreground: 60 30% 96%;

    --card: 60 6% 20%;
    --card-foreground: 60 30% 96%;

    --popover: 60 6% 20%;
    --popover-foreground: 60 30% 96%;

    --primary: 65 92% 76%;
    --primary-foreground: 60 6% 14%;

    --secondary: 60 6% 28%;
    --secondary-foreground: 60 30% 96%;

    --muted: 60 6% 28%;
    --muted-foreground: 60 30% 85%;

    --accent: 60 6% 28%;
    --accent-foreground: 60 30% 96%;

    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 60 30% 96%;

    --border: 60 6% 28%;
    --input: 60 6% 28%;
    --ring: 65 92% 76%;

    --correct: 80 60% 60%;
    --error: 0 100% 67%;
  }

  /* GitHub theme */
  .theme-github {
    --background: 0 0% 100%;
    --foreground: 210 12% 16%;

    --card: 0 0% 98%;
    --card-foreground: 210 12% 16%;

    --popover: 0 0% 98%;
    --popover-foreground: 210 12% 16%;

    --primary: 212 92% 45%;
    --primary-foreground: 0 0% 100%;

    --secondary: 220 14% 96%;
    --secondary-foreground: 210 12% 16%;

    --muted: 220 14% 96%;
    --muted-foreground: 210 12% 45%;

    --accent: 220 14% 96%;
    --accent-foreground: 210 12% 16%;

    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 0 0% 100%;

    --border: 220 14% 90%;
    --input: 220 14% 90%;
    --ring: 212 92% 45%;

    --correct: 137 55% 36%;
    --error: 0 72% 51%;
  }

  * {
    @apply border-border;
  }

  html, body {
    @apply overscroll-none transition-colors duration-200;
  }

  body {
    @apply bg-background text-foreground;
    font-feature-settings: "cv02", "cv03", "cv04", "cv09", "cv11";
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
    transition: background-color 0.3s ease, color 0.3s ease;
  }

  ::selection {
    @apply bg-primary/20 text-foreground;
  }

  /* Font classes */
  .font-inter {
    font-family: 'Inter', system-ui, sans-serif;
  }

  .font-jetbrains-mono {
    font-family: 'JetBrains Mono', monospace;
  }

  .font-roboto-mono {
    font-family: 'Roboto Mono', monospace;
  }

  .font-space-mono {
    font-family: 'Space Mono', monospace;
  }

  .font-ubuntu-mono {
    font-family: 'Ubuntu Mono', monospace;
  }

  .font-fira-code {
    font-family: 'Fira Code', monospace;
  }

  .font-source-code-pro {
    font-family: 'Source Code Pro', monospace;
  }

  .font-comic-sans {
    font-family: 'Comic Sans MS', cursive;
  }
}

@layer components {
  .typing-cursor {
    @apply inline-block h-5 w-0.5 bg-primary ml-0.5 mb-0.5 animate-blink;
  }

  .glass-panel {
    @apply bg-white/80 backdrop-blur-md border border-white/20 shadow-sm;
  }

  .word {
    @apply px-0.5 transition-colors duration-150 ease-in-out;
  }

  .caret {
    @apply absolute w-0.5 h-7 bg-primary rounded-sm;
    will-change: transform;
    backface-visibility: hidden;
    transform: translateZ(0);
    animation: blink 1s step-end infinite;
  }

  @keyframes blink {
    50% { opacity: 0; }
  }

  @keyframes typing-indicator {
    0%, 100% { opacity: 0.6; }
    50% { opacity: 0.9; }
  }

  .animate-pulse-smooth {
    animation: typing-indicator 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
  }

  .char {
    @apply mx-0.5 transition-all duration-150 ease-in-out relative inline-block;
  }

  .char.correct {
    @apply text-correct transition-all duration-150 ease-in-out;
  }

  .char.incorrect {
    @apply text-error bg-error/5 transition-all duration-150 ease-in-out;
  }

  .char.current {
    @apply relative;
  }

  .char.current::before {
    content: '';
    @apply absolute bottom-0 left-0 w-full h-px bg-primary/50 animate-pulse-smooth;
  }

  .key {
    @apply flex items-center justify-center h-10 rounded-md bg-secondary border-b-2 border-secondary/50 shadow-sm transition-all duration-150 ease-in-out text-foreground/80 text-sm font-medium;
  }

  .key.active {
    @apply bg-primary/10 border-primary/30 animate-key-press-smooth text-primary;
  }

  .key-row {
    @apply flex space-x-1 my-1;
  }

  /* Add smooth transition for blur effect */
  .blur-transition {
    transition: filter 0.3s ease-in-out, background-color 0.3s ease-in-out;
  }
}
